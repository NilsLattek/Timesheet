<%- model_class = Timesheet.new.class -%>
<div class="row">
  <div class="span10"><h1><%=t '.title', :default => model_class.model_name.human.pluralize %></h1></div>
  <div class="span2">
    <ul class="nav nav-pills">
      <li class="<%= 'active' if current_page?(:action => 'index') %>">
        <%= link_to 'All', timesheets_path %>
      </li>
      <li class="<%= 'active' if @week and current_page?(:action => 'weekly', :year => @week.year, :week => @week.cweek) %>">
        <%= link_to 'CW', weekly_timesheets_path(DateTime.now.year, DateTime.now.cweek) %>
      </li>
    </ul>
  </div>
</div>
<table class="table table-striped">
  <thead>
    <tr>
      <th><%= model_class.human_attribute_name(:date) %></th>
      <th><%= model_class.human_attribute_name(:start_time) %></th>
      <th><%= model_class.human_attribute_name(:end_time) %></th>
      <th><%= model_class.human_attribute_name(:lunch_break) %></th>
      <th><%= model_class.human_attribute_name(:hours_worked) %></th>
      <th><%=t '.actions', :default => t("helpers.actions") %></th>
    </tr>
  </thead>
  <tbody>
    <% @timesheets.each do |timesheet| %>
      <tr data-link="<%= timesheet_path(timesheet) %>">
        <td><%=l timesheet.date %></td>
        <td><%=l timesheet.start_time, :format => :short %></td>
        <td><%=l timesheet.end_time, :format => :short %></td>
        <td><%= timesheet.lunch_break %></td>
        <td><%= timesheet.hours_worked %></td>
        <td>
          <%= link_to t('.edit', :default => t("helpers.links.edit")),
                      edit_timesheet_path(timesheet), :class => 'btn btn-mini' %>
          <%= link_to t('.destroy', :default => t("helpers.links.destroy")),
                      timesheet_path(timesheet),
                      :method => :delete,
                      :confirm => t('.confirm', :default => t("helpers.links.confirm", :default => 'Are you sure?')),
                      :class => 'btn btn-mini btn-danger' %>
        </td>
      </tr>
    <% end %>
  </tbody>
</table>


<% if @week and current_page?(:action => 'weekly', :year => @week.year, :week => @week.cweek) %>
  <ul class="pager">
    <li class="previous">
      <%= link_to '← Older', weekly_timesheets_path(@week.prev_week.year, @week.prev_week.cweek) %>
    </li>
    <li class="next">
      <%= link_to 'Newer →', weekly_timesheets_path(@week.next_week.year, @week.next_week.cweek) %>
    </li>
  </ul>
  <%= link_to(weekly_timesheets_path(@week.year, @week.cweek, :format => :print), :class => 'btn') do %>
    <i class="icon-print"></i> Print
  <% end %>
<% else %>
  <%= page_navigation_links @timesheets %>
<% end %>

<%= link_to t('.new', :default => t("helpers.links.new")),
            new_timesheet_path,
            :class => 'btn btn-primary' %>

